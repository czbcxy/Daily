package com.example.java.jottings.regex;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

/**
 * @author renrang.yl
 * @date 2018/12/3 下午7:49.
 */
public class LogParserTest {


    public void accessTest() {

//      String str = "2018-12-03 19:44:11,036 [C329B80F-5CFA-446E-8DBC-FEFF13D4F287] INFO  AccessLog - {\"apiName\":\"SetCasterChannel\",\"callerUid\":1434747140454655,\"code\":\"0\",\"exceptionName\":null,\"message\":null,\"ownerId\":null,\"popApiName\":\"SetCasterChannel\",\"popProduct\":\"live\",\"popVersion\":\"2016-11-01\",\"request\":\"{\\\"accessKeyId\\\":[\\\"XUZz9bmm089EW0QO\\\"],\\\"callerParentId\\\":[\\\"26842\\\"],\\\"resourceId\\\":[\\\"b57ca564-a583-41c2-82e6-7298b127bc6f\\\"],\\\"apiName\\\":[\\\"SetCasterChannel\\\"],\\\"product\\\":[\\\"live\\\"],\\\"proxyTrustTransportInfo\\\":[\\\"false\\\"],\\\"casterId\\\":[\\\"c04bfe95-8241-47a3-9357-67e7b08de5cc\\\"],\\\"mfaPresent\\\":[\\\"false\\\"],\\\"popProduct\\\":[\\\"live\\\"],\\\"callerBid\\\":[\\\"26842\\\"],\\\"version\\\":[\\\"2016-11-01\\\"],\\\"callerSecurityTransport\\\":[\\\"false\\\"],\\\"regionId\\\":[\\\"cn-shanghai\\\"],\\\"requestId\\\":[\\\"C329B80F-5CFA-446E-8DBC-FEFF13D4F287\\\"],\\\"clientIP\\\":[\\\"106.11.214.105\\\"],\\\"callerType\\\":[\\\"customer\\\"],\\\"callerUid\\\":[\\\"1434747140454655\\\"],\\\"channelId\\\":[\\\"RV01\\\"]}\",\"response\":null,\"runTime\":175,\"serviceCode\":\"live\",\"startTime\":1543837450861,\"statusCode\":400,\"success\":false}";
//      String str = "2018-12-12 19:06:27,699 [D6B4E4DF-2219-4657-B391-63013C27D496] INFO  log.AccessLog - {\"apiName\":\"invokeRtcApi\",\"callerUid\":292578824716792583,\"code\":\"200\",\"exceptionName\":null,\"message\":null,\"ownerId\":null,\"popApiName\":\"CreateConference\",\"popProduct\":\"rtc\",\"popVersion\":\"2018-01-11\",\"request\":[{\"accessKeyId\":\"LTAIAQdk0lCdLENd\",\"apiName\":\"CreateConference\",\"appId\":\"hncnroxo\",\"callerBid\":\"26842\",\"callerBidLoginEmail\":null,\"callerParentId\":1798924632693822,\"callerSecurityTransport\":false,\"callerType\":\"sub\",\"callerUid\":292578824716792583,\"callerUidLoginEmail\":null,\"clientIP\":\"203.119.193.38\",\"domainName\":null,\"mFAPresent\":false,\"mfaPresent\":false,\"ownerAccount\":null,\"ownerId\":null,\"ownerIdLoginEmail\":null,\"popProduct\":\"rtc\",\"proxyCallerIp\":null,\"proxyCallerSecurityTransport\":false,\"proxyTrustTransportInfo\":false,\"requestContent\":null,\"requestFrom\":\"OpenApi\",\"requestId\":\"D6B4E4DF-2219-4657-B391-63013C27D496\",\"resourceGroup\":null,\"resourceGroupId\":null,\"securityToken\":null,\"token\":null,\"version\":\"2018-01-11\"},{\"conferenceName\":null,\"remindNotice\":null,\"clientToken\":\"213d86b4-05d7-42f8-9b10-1de475af8b61\",\"appId\":\"hncnroxo\",\"startTime\":null,\"ProductEnum\":\"rtc\",\"type\":null}],\"response\":{\"code\":\"200\",\"data\":{\"conferenceName\":null,\"remindNotice\":null,\"clientToken\":\"213d86b4-05d7-42f8-9b10-1de475af8b61\",\"appId\":\"hncnroxo\",\"startTime\":null,\"type\":null,\"content\":{\"conferenceId\":\"324fa3093dd74cbbae63c9ea76db8007\",\"authInfo\":{\"nonce\":\"214eb0ac941b39208fa35fc642540b7c\",\"key\":\"644bd8695fabcbd98d0e64bd9f3e2785f0a5440d2077d30eb8624b859a50fe33\",\"timestamp\":1544612787}}},\"dynamicCode\":null,\"dynamicMessage\":null,\"httpStatusCode\":200,\"message\":\"successful\",\"requestId\":\"D6B4E4DF-2219-4657-B391-63013C27D496\",\"success\":true},\"runTime\":362,\"serviceCode\":\"rtc\",\"startTime\":1544612787337,\"statusCode\":200,\"success\":true}";
        String str = "2018-12-24 10:20:51,148 [7FA7EF5D-9616-47EB-B0F6-B0107959BE02] INFO  AccessLog - {\"apiName\":\"DescribeLiveUserDomains\",\"callerUid\":5258775128095349,\"code\":\"200\",\"exceptionName\":null,\"message\":null,\"ownerId\":null,\"popApiName\":\"DescribeLiveUserDomains\",\"popProduct\":\"live\",\"popVersion\":\"2016-11-01\",\"region\":\"center\",\"request\":\"{\\\"accessKeyId\\\":\\\"TMP.AQFxSg-ROWpdYW7BQvXEr2lJkzecmJqVBT42-qoQUzBO8lc2xMtJcKWMfbSvADAtAhUAhwLRrp3GYLSd7p6xMz-BrpO4pSwCFD24NLK7ajk1b0TMMgaXQhbJ8dBA\\\",\\\"callerParentId\\\":\\\"26855\\\",\\\"apiName\\\":\\\"DescribeLiveUserDomains\\\",\\\"pageNumber\\\":\\\"1\\\",\\\"proxyTrustTransportInfo\\\":\\\"true\\\",\\\"mfaPresent\\\":\\\"false\\\",\\\"pageSize\\\":\\\"500\\\",\\\"callerBid\\\":\\\"26855\\\",\\\"callerSecurityTransport\\\":\\\"false\\\",\\\"liveDomainType\\\":\\\"liveVideo\\\",\\\"proxyCallerIp\\\":\\\"106.11.34.10\\\",\\\"regionId\\\":\\\"cn-shanghai\\\",\\\"proxyCallerSecurityTransport\\\":\\\"true\\\",\\\"requestId\\\":\\\"7FA7EF5D-9616-47EB-B0F6-B0107959BE02\\\",\\\"clientIP\\\":\\\"106.11.228.143\\\",\\\"callerType\\\":\\\"customer\\\",\\\"callerUid\\\":\\\"5258775128095349\\\"}\",\"response\":null,\"runTime\":713,\"serviceCode\":\"live\",\"startTime\":1545618050435,\"statusCode\":200,\"success\":true}";
        String regEx = "(\\d+-\\d+-\\d+\\s+\\d+:\\d+:\\d+,\\d+)\\s\\[([^]]*)]\\s(\\w+)[^\"]+\"apiName\":\"([^\\n]+)\",\"callerUid\":([^\\n]+),\"code\":\"([^\\n]+)\",\"exceptionName\":\"?(\\w+)\"?,\"message\":\"?([^\\n]+)\"?,\"ownerId\":\"?(\\w+)\"?,\"popApiName\":\"?(\\w+)\"?,\"popProduct\":\"(\\w+)\",\"popVersion\":\"?([\\w-]+)\"?,\"region\":\"?([\\w-]+)\"?,\"request\":([^\\n]+),\"response\":([^\\n]+),\"runTime\":([^\\n]+),\"serviceCode\":\"([^\\n]+)\",\"startTime\":([^\\n]+),\"statusCode\":([^\\n]+),\"success\":([^\\n]+)\\}";
        Pattern pat = Pattern.compile(regEx);
        Matcher mat = pat.matcher(str);
        if (mat.find()) {
            System.out.println(mat.group(1));
            System.out.println(mat.group(2));
            System.out.println(mat.group(3));
            System.out.println(mat.group(4));
            System.out.println(mat.group(5));
            System.out.println(mat.group(6));
            System.out.println(mat.group(7));
            System.out.println(mat.group(8));
            System.out.println(mat.group(9));
            System.out.println(mat.group(10));
            System.out.println(mat.group(11));
            System.out.println(mat.group(12));
            System.out.println(mat.group(13));
            System.out.println(mat.group(14));
            System.out.println(mat.group(15));
            System.out.println(mat.group(16));
        }
    }


    public void accessWithRegionTest() {


        String str1 = "2018-10-18 16:28:28,189 [897B6916-A114-4B2B-9820-B713B52B35D5] INFO  log.AccessLog - {\"apiName\":\"refreshObjectCaches\",\"callerUid\":1289820509706656,\"code\":\"200\",\"exceptionName\":null,\"message\":null,\"ownerId\":null,\"popApiName\":\"RefreshObjectCaches\",\"popProduct\":\"Cdn\",\"popVersion\":null,\"region\":\"center\",\"request\":[{\"proxyTrustTransportInfo\":false,\"regionId\":null,\"requestContent\":null,\"requestFrom\":\"OpenApi\",\"requestId\":\"897B6916-A114-4B2B-9820-B713B52B35D5\",\"resourceGroupId\":null,\"securityToken\":null,\"token\":null,\"urls\":[\"http://fce-cdn.fliggy.com/release/fce/recovery/v1/recovery_1\"],\"version\":null}],\"response\":{\"message\":\"successful\",\"requestId\":\"897B6916-A114-4B2B-9820-B713B52B35D5\",\"success\":true},\"runTime\":6,\"serviceCode\":\"cdn\",\"startTime\":1539851308183,\"statusCode\":200,\"success\":true}";
        String str2 = "2019-01-03 14:22:17,130 [1822DB0B-5A50-473B-B81B-4AEF9A517DDC] INFO  log.AccessLog - {\"apiName\":\"invokeRtcApi\",\"callerUid\":250455034494365050,\"code\":\"200\",\"exceptionName\":null,\"message\":null,\"ownerId\":1394596798576109,\"popApiName\":\"DescribeRealTimeRecordDetail\",\"popProduct\":\"rtc\",\"popVersion\":\"2018-01-11\",\"region\":\"center\",\"request\":[{\"accessKeyId\":\"LTAIQhXOeDiEQ9A0\",\"apiName\":\"DescribeRealTimeRecordDetail\",\"appId\":\"waz4a80p\",\"callerBid\":\"26842\",\"callerBidLoginEmail\":null,\"callerParentId\":1394596798576109,\"callerSecurityTransport\":false,\"callerType\":\"sub\",\"callerUid\":250455034494365050,\"callerUidLoginEmail\":null,\"clientIP\":\"42.120.75.131\",\"domainName\":null,\"mFAPresent\":false,\"mfaPresent\":false,\"ownerAccount\":null,\"ownerId\":1394596798576109,\"ownerIdLoginEmail\":null,\"popProduct\":\"rtc\",\"proxyCallerIp\":null,\"proxyCallerSecurityTransport\":false,\"proxyTrustTransportInfo\":false,\"requestContent\":null,\"requestFrom\":\"OpenApi\",\"requestId\":\"1822DB0B-5A50-473B-B81B-4AEF9A517DDC\",\"resourceGroup\":null,\"resourceGroupId\":null,\"securityToken\":null,\"token\":null,\"version\":\"2018-01-11\"},{\"recordId\":\"1\",\"appId\":\"waz4a80p\",\"ProductEnum\":\"rtc\",\"channelId\":\"24bddd26dd424bb98321b39ce15dc06d\"}],\"response\":null,\"runTime\":148,\"serviceCode\":\"rtc\",\"startTime\":1546496536982,\"statusCode\":200,\"success\":true}";
        String regEx = "(\\d+-\\d+-\\d+\\s+\\d+:\\d+:\\d+,\\d+)\\s\\[([^]]*)]\\s(\\w+)[^\"]+\"apiName\":\"([^\\n]+)\",\"callerUid\":([^\\n]+),\"code\":\"([^\\n]+)\",\"exceptionName\":\"?(\\w+)\"?,\"message\":\"?([^\\n]+)\"?,\"ownerId\":\"?(\\w+)\"?,\"popApiName\":\"?(\\w+)\"?,\"popProduct\":\"(\\w+)\",\"popVersion\":\"?([\\w-]+)\"?,\"region\":\"?([\\w-]+)\"?,\"request\":([^\\n]+),\"response\":([^\\n]+),\"runTime\":([^\\n]+),\"serviceCode\":\"([^\\n]+)\",\"startTime\":([^\\n]+),\"statusCode\":([^\\n]+),\"success\":([^\\n]+)\\}";
        Pattern pat = Pattern.compile(regEx);
        Matcher mat = pat.matcher(str2);
        if (mat.find()) {
            System.out.println(mat.group(1));
            System.out.println(mat.group(2));
            System.out.println(mat.group(3));
            System.out.println(mat.group(4));
            System.out.println(mat.group(5));
            System.out.println(mat.group(6));
            System.out.println(mat.group(7));
            System.out.println(mat.group(8));
            System.out.println(mat.group(9));
            System.out.println(mat.group(10));
            System.out.println(mat.group(11));
            System.out.println(mat.group(12));
            System.out.println(mat.group(13));
            System.out.println(mat.group(14));
            System.out.println(mat.group(15));
            System.out.println(mat.group(16));
        }
    }

    public static void main(String[] args) {
        accessWithEagleeyeTest();
    }

    public static void accessWithEagleeyeTest() {
//        String strx = "2019-04-02 14:34:15,663 [F35E3FC2-A784-433B-86BA-AB8D317EB148] INFO  log.AccessLog - {\"apiName\":\"refreshObjectCaches\",\"callerUid\":1788677591821966,\"code\":\"-124\",\"eagleEyeRpcId\":\"9\",\"eagleEyeTraceId\":\"0b89242915541868556545584d2d55\",\"eagleEyeUserData\":\"{\\\"s\\\":\\\"f4715e73\\\"}\",\"exceptionName\":null,\"message\":null,\"ownerId\":1788677591821966,\"popApiName\":\"RefreshObjectCaches\",\"popProduct\":\"Cdn\",\"popVersion\":null,\"region\":\"center\",\"request\":[{\"accessKeyId\":\"YNHoYWtoamNkIwPQ\",\"apiName\":\"RefreshObjectCaches\",\"bidUser\":false,\"callerBid\":\"1124365498307872\",\"callerBidLoginEmail\":null,\"callerParentId\":1124365498307872,\"callerSecurityTransport\":false,\"callerType\":\"customer\",\"callerUid\":1788677591821966,\"callerUidLoginEmail\":null,\"clientIP\":\"203.119.196.47\",\"eagleEyeRpcId\":null,\"eagleEyeTraceId\":null,\"eagleEyeUserData\":null,\"mFAPresent\":false,\"mfaPresent\":false,\"objectPath\":\"http://xianyu-video.alicdn.com/1554186663702.105957\",\"objectType\":\"single\",\"ownerAccount\":null,\"ownerId\":1788677591821966,\"ownerIdLoginEmail\":null,\"popProduct\":\"Cdn\",\"proxyCallerIp\":null,\"proxyCallerSecurityTransport\":false,\"proxyTrustTransportInfo\":false,\"regionId\":null,\"requestContent\":null,\"requestFrom\":\"OpenApi\",\"requestId\":\"F35E3FC2-A784-433B-86BA-AB8D317EB148\",\"resourceGroupId\":null,\"resourceOwnerId\":null,\"securityToken\":null,\"showLog\":null,\"token\":null,\"urls\":[\"http://xianyu-video.alicdn.com/1554186663702.105957\"],\"version\":null}],\"response\":null,\"runTime\":7,\"serviceCode\":\"cdn\",\"startTime\":1554186855656,\"statusCode\":400,\"success\":false}";
//        String str  = "2019-04-02 14:34:59,559 [ABC00370-644A-4D00-A5D2-9084F47CC3A7] INFO  log.AccessLog - {\"apiName\":\"describeDomainDetail\",\"callerUid\":289808794401825525,\"code\":\"-124\",\"eagleEyeRpcId\":\"9\",\"eagleEyeTraceId\":\"0baf87d215541868995538603d2654\",\"eagleEyeUserData\":\"{\\\"s\\\":\\\"c264cd1d\\\"}\",\"exceptionName\":null,\"message\":null,\"ownerId\":null,\"popApiName\":\"DescribeDcdnDomainDetail\",\"popProduct\":\"dcdn\",\"popVersion\":null,\"region\":\"center\",\"request\":[{\"accessKeyId\":\"LTAIoFJP11vhzquu\",\"apiName\":\"DescribeDcdnDomainDetail\",\"bidUser\":false,\"callerBid\":\"26842\",\"callerBidLoginEmail\":null,\"callerParentId\":1344394397470308,\"callerSecurityTransport\":true,\"callerType\":\"sub\",\"callerUid\":289808794401825525,\"callerUidLoginEmail\":null,\"clientIP\":\"115.236.16.115\",\"domainName\":\"fusion-integration-nmdxur.qbox.net\",\"domainNameVirtual\":null,\"eagleEyeRpcId\":null,\"eagleEyeTraceId\":null,\"eagleEyeUserData\":null,\"mFAPresent\":false,\"mfaPresent\":false,\"ownerAccount\":null,\"ownerId\":null,\"ownerIdLoginEmail\":null,\"popProduct\":\"dcdn\",\"proxyCallerIp\":null,\"proxyCallerSecurityTransport\":false,\"proxyTrustTransportInfo\":false,\"regionId\":null,\"requestContent\":null,\"requestFrom\":\"OpenApi\",\"requestId\":\"ABC00370-644A-4D00-A5D2-9084F47CC3A7\",\"resourceGroupId\":null,\"resourceOwnerId\":null,\"securityToken\":null,\"showLog\":null,\"token\":null,\"version\":null}],\"response\":null,\"runTime\":5,\"serviceCode\":\"dcdn\",\"startTime\":1554186899554,\"statusCode\":400,\"success\":false}";
        String str0 = "2019-04-02 14:34:15,566 [9D86B1C7-AD22-45D4-BB00-2C40F7C1C0C6] INFO  log.AccessLog - {\"apiName\":\"pushObjectCaches\",\"callerUid\":1600418971270539,\"code\":\"-507\",\"eagleEyeRpcId\":\"9\",\"eagleEyeTraceId\":\"0b89242e15541868555593408d5f90\",\"eagleEyeUserData\":\"{\\\"s\\\":\\\"b08aa170\\\"}\",\"exceptionName\":null,\"message\":null,\"ownerId\":1600418971270539,\"popApiName\":\"PushObjectCache\",\"popProduct\":\"Cdn\",\"popVersion\":null,\"region\":\"center\",\"request\":[{\"accessKeyId\":\"uKI06h284HSyUh27\",\"apiName\":\"PushObjectCache\",\"area\":null,\"bidUser\":false,\"callerBid\":\"26842\",\"callerBidLoginEmail\":null,\"callerParentId\":26842,\"callerSecurityTransport\":false,\"callerType\":\"customer\",\"callerUid\":1600418971270539,\"callerUidLoginEmail\":null,\"clientIP\":\"123.56.23.210\",\"eagleEyeRpcId\":null,\"eagleEyeTraceId\":null,\"eagleEyeUserData\":null,\"mFAPresent\":false,\"mfaPresent\":false,\"objectPath\":\"img.momocdn.com/feedvideo/65/9E/659E7B31-C9F7-6822-7480-9E7CC521632920190402_h265.mp4\",\"ownerAccount\":null,\"ownerId\":1600418971270539,\"ownerIdLoginEmail\":null,\"popProduct\":\"Cdn\",\"proxyCallerIp\":null,\"proxyCallerSecurityTransport\":false,\"proxyTrustTransportInfo\":false,\"regionId\":null,\"requestContent\":null,\"requestFrom\":\"OpenApi\",\"requestId\":\"9D86B1C7-AD22-45D4-BB00-2C40F7C1C0C6\",\"resourceGroupId\":null,\"resourceOwnerId\":null,\"securityToken\":null,\"showLog\":null,\"token\":null,\"urls\":[\"http://img.momocdn.com/feedvideo/65/9E/659E7B31-C9F7-6822-7480-9E7CC521632920190402_h265.mp4\"],\"version\":null}],\"response\":null,\"runTime\":6,\"serviceCode\":\"cdn\",\"startTime\":1554186855560,\"statusCode\":400,\"success\":false}";

        String str1 = "2018-10-18 16:28:28,189 [897B6916-A114-4B2B-9820-B713B52B35D5] INFO  log.AccessLog - {\"apiName\":\"refreshObjectCaches\",\"callerUid\":1289820509706656,\"code\":\"200\",\"exceptionName\":null,\"message\":null,\"ownerId\":null,\"popApiName\":\"RefreshObjectCaches\",\"popProduct\":\"Cdn\",\"popVersion\":null,\"region\":\"center\",\"request\":[{\"proxyTrustTransportInfo\":false,\"regionId\":null,\"requestContent\":null,\"requestFrom\":\"OpenApi\",\"requestId\":\"897B6916-A114-4B2B-9820-B713B52B35D5\",\"resourceGroupId\":null,\"securityToken\":null,\"token\":null,\"urls\":[\"http://fce-cdn.fliggy.com/release/fce/recovery/v1/recovery_1\"],\"version\":null}],\"response\":{\"message\":\"successful\",\"requestId\":\"897B6916-A114-4B2B-9820-B713B52B35D5\",\"success\":true},\"runTime\":6,\"serviceCode\":\"cdn\",\"startTime\":1539851308183,\"statusCode\":200,\"success\":true}";
//        String str2 = "2019-01-03 14:22:17,130 [1822DB0B-5A50-473B-B81B-4AEF9A517DDC] INFO  log.AccessLog - {\"apiName\":\"invokeRtcApi\",\"callerUid\":250455034494365050,\"code\":\"200\",\"exceptionName\":null,\"message\":null,\"ownerId\":1394596798576109,\"popApiName\":\"DescribeRealTimeRecordDetail\",\"popProduct\":\"rtc\",\"popVersion\":\"2018-01-11\",\"region\":\"center\",\"request\":[{\"accessKeyId\":\"LTAIQhXOeDiEQ9A0\",\"apiName\":\"DescribeRealTimeRecordDetail\",\"appId\":\"waz4a80p\",\"callerBid\":\"26842\",\"callerBidLoginEmail\":null,\"callerParentId\":1394596798576109,\"callerSecurityTransport\":false,\"callerType\":\"sub\",\"callerUid\":250455034494365050,\"callerUidLoginEmail\":null,\"clientIP\":\"42.120.75.131\",\"domainName\":null,\"mFAPresent\":false,\"mfaPresent\":false,\"ownerAccount\":null,\"ownerId\":1394596798576109,\"ownerIdLoginEmail\":null,\"popProduct\":\"rtc\",\"proxyCallerIp\":null,\"proxyCallerSecurityTransport\":false,\"proxyTrustTransportInfo\":false,\"requestContent\":null,\"requestFrom\":\"OpenApi\",\"requestId\":\"1822DB0B-5A50-473B-B81B-4AEF9A517DDC\",\"resourceGroup\":null,\"resourceGroupId\":null,\"securityToken\":null,\"token\":null,\"version\":\"2018-01-11\"},{\"recordId\":\"1\",\"appId\":\"waz4a80p\",\"ProductEnum\":\"rtc\",\"channelId\":\"24bddd26dd424bb98321b39ce15dc06d\"}],\"response\":null,\"runTime\":148,\"serviceCode\":\"rtc\",\"startTime\":1546496536982,\"statusCode\":200,\"success\":true}";
//        String str3 = "2019-02-20 11:30:07,087 [1CACF452-ACBC-4110-9513-6E97C66C2237] INFO  log.AccessLog - {\"apiName\":\"invoke\",\"callerUid\":1032013260743038,\"code\":\"200\",\"eagleEyeRpcId\":\"9\",\"eagleEyeTraceId\":\"0b87b7c415506334062058121d4a17\",\"eagleEyeUserData\":\"{\\\"s\\\":\\\"d281f238\\\"}\",\"exceptionName\":null,\"message\":null,\"ownerId\":1032013260743038,\"popApiName\":\"DescribeTopDomainsByFlow\",\"popProduct\":\"Cdn\",\"popVersion\":\"2018-05-10\",\"region\":\"center\",\"request\":[{\"accessKeyId\":\"TMP.AQG0PucU0qqk3mS9LJ_1-9L_u1OyGSIenrKPgVsfuJOxTEyDbeuea0OHM_M4ADAtAhUA73vgQY0TsMqfIBh5JHsIVtKH8DkCFDQ1aeBd-BxSBaMaeT9uB4p-Sr2l\",\"apiName\":\"DescribeTopDomainsByFlow\",\"bidUser\":false,\"callerBid\":\"26842\",\"callerBidLoginEmail\":null,\"callerParentId\":26842,\"callerSecurityTransport\":false,\"callerType\":\"customer\",\"callerUid\":1032013260743038,\"callerUidLoginEmail\":null,\"clientIP\":\"100.68.162.67\",\"domainName\":null,\"eagleEyeRpcId\":null,\"eagleEyeTraceId\":null,\"eagleEyeUserData\":null,\"mFAPresent\":false,\"mfaPresent\":false,\"ownerAccount\":null,\"ownerId\":1032013260743038,\"ownerIdLoginEmail\":null,\"popProduct\":\"Cdn\",\"proxyCallerIp\":\"106.11.34.20\",\"proxyCallerSecurityTransport\":true,\"proxyTrustTransportInfo\":true,\"regionId\":null,\"requestContent\":null,\"requestFrom\":\"OpenApi\",\"requestId\":\"1CACF452-ACBC-4110-9513-6E97C66C2237\",\"resourceGroup\":null,\"resourceGroupId\":null,\"resourceOwnerId\":null,\"securityToken\":null,\"showLog\":null,\"token\":null,\"version\":\"2018-05-10\"},{\"product\":\"cdn\",\"limit\":5,\"startTime\":\"2019-02-18T16:00:00Z\",\"endTime\":\"2019-02-19T15:59:59Z\"}],\"response\":null,\"runTime\":879,\"serviceCode\":\"cdn\",\"startTime\":1550633406208,\"statusCode\":200,\"success\":true}";
//        String str4 = "2019-02-20 14:38:43,512 [58FCFD01-498C-4E22-A1FC-8A1B3015505C] INFO  log.AccessLog - {\"apiName\":\"invoke\",\"callerUid\":1032013260743038,\"code\":\"200\",\"eagleEyeRpcId\":\"9\",\"eagleEyeTraceId\":\"0b87b7c415506447231317665d4a17\",\"eagleEyeUserData\":\"{\\\"s\\\":\\\"d281f238\\\"}\",\"exceptionName\":null,\"message\":null,\"ownerId\":1032013260743038,\"popApiName\":\"DescribeDomainBpsData\",\"popProduct\":\"Cdn\",\"popVersion\":\"2018-05-10\",\"region\":\"center\",\"request\":[{\"accessKeyId\":\"TMP.AQG0PucU0qqk3mS9LJ_1-9L_u1OyGSIenrKPgVsfuJOxTEyDbeuea0OHM_M4ADAtAhUA73vgQY0TsMqfIBh5JHsIVtKH8DkCFDQ1aeBd-BxSBaMaeT9uB4p-Sr2l\",\"apiName\":\"DescribeDomainBpsData\",\"bidUser\":false,\"callerBid\":\"26842\",\"callerBidLoginEmail\":null,\"callerParentId\":26842,\"callerSecurityTransport\":false,\"callerType\":\"customer\",\"callerUid\":1032013260743038,\"callerUidLoginEmail\":null,\"clientIP\":\"100.68.162.67\",\"domainName\":null,\"eagleEyeRpcId\":null,\"eagleEyeTraceId\":null,\"eagleEyeUserData\":null,\"mFAPresent\":false,\"mfaPresent\":false,\"ownerAccount\":null,\"ownerId\":1032013260743038,\"ownerIdLoginEmail\":null,\"popProduct\":\"Cdn\",\"proxyCallerIp\":\"42.120.75.128\",\"proxyCallerSecurityTransport\":true,\"proxyTrustTransportInfo\":true,\"regionId\":null,\"requestContent\":null,\"requestFrom\":\"OpenApi\",\"requestId\":\"58FCFD01-498C-4E22-A1FC-8A1B3015505C\",\"resourceGroup\":null,\"resourceGroupId\":null,\"resourceOwnerId\":null,\"securityToken\":null,\"showLog\":null,\"token\":null,\"version\":\"2018-05-10\"},{\"product\":\"cdn\",\"domainName\":null,\"locName\":null,\"startTime\":\"2019-02-18T16:00:00Z\",\"interval\":null,\"endTime\":\"2019-02-19T15:59:59Z\",\"ispName\":null}],\"response\":null,\"runTime\":377,\"serviceCode\":\"cdn\",\"startTime\":1550644723135,\"statusCode\":200,\"success\":true}";
        String str5 = "2019-02-20 15:24:29,698 [28B55A34-98D9-4104-9D80-7952CCAFFACE] INFO  log.AccessLog - {\"apiName\":\"describeDomainDetail\",\"callerUid\":1032013260743038,\"code\":\"200\",\"eagleEyeRpcId\":\"9\",\"eagleEyeTraceId\":\"0b87b7c415506474694242992d4a17\",\"eagleEyeUserData\":\"{\\\"s\\\":\\\"a2cf52d8\\\"}\",\"exceptionName\":null,\"message\":null,\"ownerId\":1032013260743038,\"popApiName\":\"DescribeCdnDomainDetail\",\"popProduct\":\"Cdn\",\"popVersion\":null,\"region\":\"center\",\"request\":[{\"accessKeyId\":\"TMP.AQG0PucU0qqk3mS9LJ_1-9L_u1OyGSIenrKPgVsfuJOxTEyDbeuea0OHM_M4ADAtAhUA73vgQY0TsMqfIBh5JHsIVtKH8DkCFDQ1aeBd-BxSBaMaeT9uB4p-Sr2l\",\"apiName\":\"DescribeCdnDomainDetail\",\"bidUser\":false,\"callerBid\":\"26842\",\"callerBidLoginEmail\":null,\"callerParentId\":26842,\"callerSecurityTransport\":false,\"callerType\":\"customer\",\"callerUid\":1032013260743038,\"callerUidLoginEmail\":null,\"clientIP\":\"100.68.162.67\",\"domainName\":\"dkfd2.finalexam.cn\",\"domainNameVirtual\":\"dkfd2.finalexam.cn\",\"eagleEyeRpcId\":null,\"eagleEyeTraceId\":null,\"eagleEyeUserData\":null,\"mFAPresent\":false,\"mfaPresent\":false,\"ownerAccount\":null,\"ownerId\":1032013260743038,\"ownerIdLoginEmail\":null,\"popProduct\":\"Cdn\",\"proxyCallerIp\":\"106.11.34.20\",\"proxyCallerSecurityTransport\":true,\"proxyTrustTransportInfo\":true,\"regionId\":null,\"requestContent\":null,\"requestFrom\":\"OpenApi\",\"requestId\":\"28B55A34-98D9-4104-9D80-7952CCAFFACE\",\"resourceGroupId\":null,\"resourceOwnerId\":null,\"securityToken\":null,\"showLog\":null,\"token\":null,\"version\":null}],\"response\":{\"code\":\"200\",\"data\":{\"certName\":null,\"cname\":\"dkfd2.finalexam.cn.w.alikunlun.com\",\"domainName\":\"dkfd2.finalexam.cn\",\"domainNameReal\":\"dkfd2.finalexam.cn\",\"domainStatus\":\"online\",\"gmtCreated\":\"2019-02-12T08:01:43Z\",\"gmtModified\":\"2019-02-13T01:50Z\",\"httpsCname\":null,\"region\":null,\"remark\":\"闽ICP备15026858号-2\",\"resourceGroupId\":\"rg-aek2reg34ivsg5q\",\"scope\":\"domestic\",\"sources\":[{\"content\":\"tpjhtest.oss-cn-hangzhou.aliyuncs.com\",\"enabled\":\"online\",\"port\":80,\"priority\":\"20\",\"type\":\"oss\",\"weight\":\"10\"}],\"sslProtocol\":null,\"sslPub\":null,\"webSiteType\":\"web\"},\"dynamicCode\":null,\"dynamicMessage\":null,\"errorCode\":null,\"errorMessage\":null,\"httpStatusCode\":200,\"message\":\"successful\",\"requestId\":\"28B55A34-98D9-4104-9D80-7952CCAFFACE\",\"success\":true},\"runTime\":270,\"serviceCode\":\"cdn\",\"startTime\":1550647469427,\"statusCode\":200,\"success\":true}";
//        String str6 = "2019-03-04 17:40:29,978 [FAE933A4-CEEF-4A94-9299-9AACF499FB34] INFO  AccessLog - {\"apiName\":\"com.aliyun.videocloud.hera.api.domain.impl.AddVsDomainServiceImpl\",\"callerUid\":278597445832725407,\"code\":null,\"eagleEyeRpcId\":\"9\",\"eagleEyeTraceId\":\"0b87b7c415516924290163383d5354\",\"eagleEyeUserData\":\"{\\\"s\\\":\\\"5b988d63\\\"}\",\"exceptionName\":null,\"message\":null,\"ownerId\":null,\"popApiName\":\"AddVsDomain\",\"popProduct\":\"vs\",\"popVersion\":null,\"region\":\"center\",\"request\":[{\"accessKeyId\":\"SUVypTLRzmtWPVTL\",\"aliUid\":1394881682333599,\"apiName\":\"AddVsDomain\",\"bid\":\"26842\",\"bizId\":null,\"callerBid\":\"26842\",\"callerBidLoginEmail\":null,\"callerUid\":278597445832725407,\"callerUidLoginEmail\":null,\"checkUrl\":null,\"clientIP\":\"42.120.75.146\",\"domainList\":[\"ylpull2.ialicdn.com\",\"ylpush2.ialicdn.com\"],\"domainName\":null,\"domainNameVirtual\":null,\"eagleEyeRpcId\":null,\"eagleEyeTraceId\":null,\"eagleEyeUserData\":null,\"innerUser\":true,\"instanceId\":null,\"operator\":null,\"ossSource\":false,\"ownerAccount\":null,\"ownerId\":null,\"ownerIdLoginEmail\":null,\"popProduct\":\"vs\",\"pullDomain\":\"ylpull2.ialicdn.com\",\"pullDomainBizName\":\"vs\",\"pushDomain\":\"ylpush2.ialicdn.com\",\"pushDomainBizName\":\"vs_edge\",\"region\":\"cn-shanghai\",\"regionId\":null,\"requestContent\":null,\"requestFrom\":null,\"requestId\":\"FAE933A4-CEEF-4A94-9299-9AACF499FB34\",\"resourceGroupId\":null,\"resourceOwnerId\":null,\"scope\":\"domestic\",\"serviceCode\":\"vs\",\"showLog\":null,\"sourceModels\":null,\"sources\":null,\"token\":null,\"topLevelDomain\":null,\"version\":null,\"webSiteType\":null}],\"response\":{\"code\":null,\"dynamicCode\":null,\"dynamicMessage\":null,\"httpStatusCode\":200,\"message\":null,\"requestId\":\"FAE933A4-CEEF-4A94-9299-9AACF499FB34\",\"success\":true},\"runTime\":953,\"serviceCode\":\"vs\",\"startTime\":1551692429025,\"statusCode\":200,\"success\":true}";
        //        String regEx = "(\\d+-\\d+-\\d+\\s+\\d+:\\d+:\\d+,\\d+)\\s\\[([^]]*)]\\s(\\w+)[^\"]+\"apiName\":\"([^\\n]+)\",\"callerUid\":([^\\n]+),\"code\":\"([^\\n]+)\",\"eagleEyeRpcId\":\"([^\\n]+)\",\"eagleEyeTraceId\":\"([^\\n]+)\",\"eagleEyeUserData\":\"([^\\n]+)\",\"exceptionName\":\"?(\\w+)\"?,\"message\":\"?([^\\n]+)\"?,\"ownerId\":\"?(\\w+)\"?,\"popApiName\":\"?(\\w+)\"?,\"popProduct\":\"(\\w+)\",\"popVersion\":\"?([\\w-]+)\"?,\"region\":\"?([\\w-]+)\"?,\"request\":([^\\n]+),\"response\":([^\\n]+),\"runTime\":([^\\n]+),\"serviceCode\":\"([^\\n]+)\",\"startTime\":([^\\n]+),\"statusCode\":([^\\n]+),\"success\":([^\\n]+)\\}";
//        String regEx =   "(\\d+-\\d+-\\d+\\s+\\d+:\\d+:\\d+,\\d+)\\s\\[([^]]*)]\\s(\\w+)[^\"]+\"apiName\":\"([^\\n]+)\",\"callerUid\":([^\\n]+),\"code\":\"([^\\n]+)\",\"eagleEyeRpcId\":\"([^\\n]+)\",\"eagleEyeTraceId\":\"([^\\n]+)\",\"eagleEyeUserData\":\"([^\\n]+)\",\"exceptionName\":\"?(\\w+)\"?,\"message\":\"?([^\\n]+)\"?,\"ownerId\":\"?(\\w+)\"?,\"popApiName\":\"?(\\w+)\"?,\"popProduct\":\"(\\w+)\",\"popVersion\":\"?([\\w-]+)\"?,\"region\":\"?([\\w-]+)\"?,\"request\":([^\\n]+),\"response\":([^\\n]+),\"runTime\":([^\\n]+),\"serviceCode\":\"([^\\n]+)\",\"startTime\":([^\\n]+),\"statusCode\":([^\\n]+),\"success\":([^\\n]+)\\}";
        String regEx = "(\\d+-\\d+-\\d+\\s+\\d+:\\d+:\\d+,\\d+)\\s\\[([^]]*)]\\s(\\w+)[^\"]+\"apiName\":\"([^\\n]+)\",\"callerUid\":([^\\n]+),\"code\":\"([^\\n]+)\",\"eagleEyeRpcId\":\"([^\\n]+)\",\"eagleEyeTraceId\":\"([^\\n]+)\",\"eagleEyeUserData\":\"([^\\n]+)\",\"exceptionName\":\"?(\\w+)\"?,\"message\":\"?([^\\n]+)\"?,\"ownerId\":\"?(\\w+)\"?,\"popApiName\":\"?(\\w+)\"?,\"popProduct\":\"(\\w+)\",\"popVersion\":\"?([\\w-]+)\"?,\"region\":\"?([\\w-]+)\"?,\"request\":([^\\n]+),\"response\":([^\\n]+),\"runTime\":([^\\n]+),\"serviceCode\":\"([^\\n]+)\",\"startTime\":([^\\n]+),\"statusCode\":([^\\n]+),\"success\":([^\\n]+)\\}";
        Pattern pat = Pattern.compile(regEx);
        Matcher mat = pat.matcher(str0);
        if (mat.find()) {
            System.out.println(mat.group(1));
            System.out.println(mat.group(2));
            System.out.println(mat.group(3));
            System.out.println(mat.group(4));
            System.out.println(mat.group(5));
            System.out.println(mat.group(6));
            //鹰眼三个参数
            System.out.println(mat.group(7));
            System.out.println(mat.group(8));
            System.out.println(mat.group(9));
            System.out.println(mat.group(10));
            System.out.println(mat.group(11));
            System.out.println(mat.group(12));
            System.out.println(mat.group(13));
            System.out.println(mat.group(14));
            System.out.println(mat.group(15));
            System.out.println(mat.group(16));
            System.out.println(mat.group(17));
            System.out.println(mat.group(18));
            System.out.println(mat.group(19));
            System.out.println(mat.group(20));
            System.out.println(mat.group(21));
            System.out.println(mat.group(22));
            System.out.println(mat.group(23));
        }
    }

    public void testPreAccess() {
        String str = "2019-03-06 15:09:17,601 [D663FDF5-30ED-4CE1-A159-9522338E61FF] INFO  AccessLog - {\"apiName\":\"com.aliyun.openapi.hera.service.impl.DescribeUserBusinessStatusApiServiceImpl\",\"callerUid\":5697375128572112,\"code\":null,\"eagleEyeRpcId\":\"9\",\"eagleEyeTraceId\":\"0ab264dd15518561575653832d5c93\",\"eagleEyeUserData\":\"{\\\"s\\\":\\\"5fa28200\\\"}\",\"exceptionName\":null,\"message\":null,\"ownerId\":5697375128572112,\"popApiName\":\"DescribeMtsServiceStatus\",\"popProduct\":\"mts\",\"popVersion\":null,\"region\":\"center\",\"request\":[{\"accessKeyId\":\"TMP.AQFNxmi3UkwYl8Y8d_v77949rLwin_JR8tZHeE-RAu7JTzR1i3E-HV4_Md1bADAtAhQ1TwMRE1_tiebhqWkKOYzZW8s7WgIVAL5a9I66tmE055SyqJnIJ0iwTL7D\",\"apiName\":\"DescribeMtsServiceStatus\",\"callerBid\":\"26855\",\"callerBidLoginEmail\":null,\"callerParentId\":26855,\"callerSecurityTransport\":false,\"callerType\":\"customer\",\"callerUid\":5697375128572112,\"callerUidLoginEmail\":null,\"clientIP\":\"106.15.171.219\",\"eagleEyeRpcId\":null,\"eagleEyeTraceId\":null,\"eagleEyeUserData\":null,\"mFAPresent\":false,\"mfaPresent\":false,\"ownerAccount\":null,\"ownerId\":5697375128572112,\"ownerIdLoginEmail\":null,\"popProduct\":\"mts\",\"proxyCallerIp\":\"114.215.250.52\",\"proxyCallerSecurityTransport\":true,\"proxyTrustTransportInfo\":true,\"regionId\":null,\"requestContent\":null,\"requestFrom\":\"OpenApi\",\"requestId\":\"D663FDF5-30ED-4CE1-A159-9522338E61FF\",\"resourceGroupId\":null,\"resourceOwnerId\":null,\"securityToken\":null,\"showLog\":null,\"token\":null,\"version\":null}],\"response\":null,\"runTime\":35,\"serviceCode\":\"mts\",\"startTime\":1551856157566,\"statusCode\":200,\"success\":true}";
        String str2 = "2019-02-20 15:24:29,698 [28B55A34-98D9-4104-9D80-7952CCAFFACE] INFO  log.AccessLog - {\"apiName\":\"describeDomainDetail\",\"callerUid\":1032013260743038,\"code\":\"200\",\"eagleEyeRpcId\":\"9\",\"eagleEyeTraceId\":\"0b87b7c415506474694242992d4a17\",\"eagleEyeUserData\":\"{\\\"s\\\":\\\"a2cf52d8\\\"}\",\"exceptionName\":null,\"message\":null,\"ownerId\":1032013260743038,\"popApiName\":\"DescribeCdnDomainDetail\",\"popProduct\":\"Cdn\",\"popVersion\":null,\"region\":\"center\",\"request\":[{\"accessKeyId\":\"TMP.AQG0PucU0qqk3mS9LJ_1-9L_u1OyGSIenrKPgVsfuJOxTEyDbeuea0OHM_M4ADAtAhUA73vgQY0TsMqfIBh5JHsIVtKH8DkCFDQ1aeBd-BxSBaMaeT9uB4p-Sr2l\",\"apiName\":\"DescribeCdnDomainDetail\",\"bidUser\":false,\"callerBid\":\"26842\",\"callerBidLoginEmail\":null,\"callerParentId\":26842,\"callerSecurityTransport\":false,\"callerType\":\"customer\",\"callerUid\":1032013260743038,\"callerUidLoginEmail\":null,\"clientIP\":\"100.68.162.67\",\"domainName\":\"dkfd2.finalexam.cn\",\"domainNameVirtual\":\"dkfd2.finalexam.cn\",\"eagleEyeRpcId\":null,\"eagleEyeTraceId\":null,\"eagleEyeUserData\":null,\"mFAPresent\":false,\"mfaPresent\":false,\"ownerAccount\":null,\"ownerId\":1032013260743038,\"ownerIdLoginEmail\":null,\"popProduct\":\"Cdn\",\"proxyCallerIp\":\"106.11.34.20\",\"proxyCallerSecurityTransport\":true,\"proxyTrustTransportInfo\":true,\"regionId\":null,\"requestContent\":null,\"requestFrom\":\"OpenApi\",\"requestId\":\"28B55A34-98D9-4104-9D80-7952CCAFFACE\",\"resourceGroupId\":null,\"resourceOwnerId\":null,\"securityToken\":null,\"showLog\":null,\"token\":null,\"version\":null}],\"response\":{\"code\":\"200\",\"data\":{\"certName\":null,\"cname\":\"dkfd2.finalexam.cn.w.alikunlun.com\",\"domainName\":\"dkfd2.finalexam.cn\",\"domainNameReal\":\"dkfd2.finalexam.cn\",\"domainStatus\":\"online\",\"gmtCreated\":\"2019-02-12T08:01:43Z\",\"gmtModified\":\"2019-02-13T01:50Z\",\"httpsCname\":null,\"region\":null,\"remark\":\"闽ICP备15026858号-2\",\"resourceGroupId\":\"rg-aek2reg34ivsg5q\",\"scope\":\"domestic\",\"sources\":[{\"content\":\"tpjhtest.oss-cn-hangzhou.aliyuncs.com\",\"enabled\":\"online\",\"port\":80,\"priority\":\"20\",\"type\":\"oss\",\"weight\":\"10\"}],\"sslProtocol\":null,\"sslPub\":null,\"webSiteType\":\"web\"},\"dynamicCode\":null,\"dynamicMessage\":null,\"errorCode\":null,\"errorMessage\":null,\"httpStatusCode\":200,\"message\":\"successful\",\"requestId\":\"28B55A34-98D9-4104-9D80-7952CCAFFACE\",\"success\":true},\"runTime\":270,\"serviceCode\":\"cdn\",\"startTime\":1550647469427,\"statusCode\":200,\"success\":true}";
        String str3 = "2019-03-29 14:43:37,259 [805EB3E2-84C9-42CF-B18C-B9DEEBF35C07] INFO  AccessLog -     {\"apiName\":\"DeleteLiveMixConfig\",\"callerUid\":1394881682333599,\"code\":\"200\",\"eagleEyeRpcId\":null,\"eagleEyeTraceId\":null,\"eagleEyeUserData\":null,\"exceptionName\":null,\"message\":null,\"ownerId\":1394881682333599,\"popApiName\":\"DeleteLiveMixConfig\",\"popProduct\":\"live\",\"popVersion\":\"2016-11-01\",\"region\":\"center\",\"request\":\"{\\\"accessKeyId\\\":\\\"LTAIktrbEsMsE4HA\\\",\\\"callerParentId\\\":\\\"26842\\\",\\\"apiName\\\":\\\"DeleteLiveMixConfig\\\",\\\"proxyTrustTransportInfo\\\":\\\"false\\\",\\\"appName\\\":\\\"fa75990f-6501-4282-930d-e463436e83a6\\\",\\\"mfaPresent\\\":\\\"false\\\",\\\"callerBid\\\":\\\"26842\\\",\\\"callerSecurityTransport\\\":\\\"false\\\",\\\"regionId\\\":\\\"cn-shanghai\\\",\\\"requestId\\\":\\\"805EB3E2-84C9-42CF-B18C-B9DEEBF35C07\\\",\\\"domainName\\\":\\\"pull-live.aliyuncs.com\\\",\\\"clientIP\\\":\\\"106.11.34.17\\\",\\\"callerType\\\":\\\"customer\\\",\\\"callerUid\\\":\\\"1394881682333599\\\"}\",\"response\":null,\"runTime\":69,\"serviceCode\":\"live\",\"startTime\":1553841817190,\"statusCode\":200,\"success\":true}";
        String str4 = "2019-03-29 15:20:21,893 [99DAC48F-B7A3-4ACB-8C21-51050E6C320B] INFO  log.AccessLog - {\"apiName\":\"describeDomainUvData\",\"callerUid\":1883927335936173,\"code\":\"-124\",\"eagleEyeRpcId\":\"9\",\"eagleEyeTraceId\":\"0b87b7c415538440218101442d4fcb\",\"eagleEyeUserData\":\"{\\\"s\\\":\\\"243fa051\\\"}\",\"exceptionName\":null,\"message\":null,\"ownerId\":1883927335936173,\"popApiName\":\"DescribeScdnDomainUvData\",\"popProduct\":\"scdn\",\"popVersion\":null,\"region\":\"center\",\"request\":[{\"accessKeyId\":\"tMvowR94jgE1pGqO\",\"apiName\":\"DescribeScdnDomainUvData\",\"bidUser\":false,\"callerBid\":\"26842\",\"callerBidLoginEmail\":null,\"callerParentId\":26842,\"callerSecurityTransport\":false,\"callerType\":\"customer\",\"callerUid\":1883927335936173,\"callerUidLoginEmail\":null,\"clientIP\":\"106.11.34.17\",\"domainName\":\"ss2.16tp.com\",\"eagleEyeRpcId\":null,\"eagleEyeTraceId\":null,\"eagleEyeUserData\":null,\"endDate\":1553844021817,\"endTime\":\"2019-03-29T07:20:21Z\",\"mFAPresent\":false,\"mfaPresent\":false,\"ownerAccount\":null,\"ownerId\":1883927335936173,\"ownerIdLoginEmail\":null,\"popProduct\":\"scdn\",\"proxyCallerIp\":null,\"proxyCallerSecurityTransport\":false,\"proxyTrustTransportInfo\":false,\"regionId\":null,\"requestContent\":null,\"requestFrom\":\"OpenApi\",\"requestId\":\"99DAC48F-B7A3-4ACB-8C21-51050E6C320B\",\"resourceGroupId\":null,\"resourceOwnerId\":null,\"securityToken\":null,\"showLog\":null,\"startDate\":1553757621817,\"startTime\":\"2019-03-28T07:20:21Z\",\"token\":null,\"version\":null}],\"response\":null,\"runTime\":62,\"serviceCode\":\"scdn\",\"startTime\":1553844021817,\"statusCode\":400,\"success\":false}";
        String str5 = "2019-03-29 18:46:32,761 [59F814EF-84F2-4FF7-948D-9136C47CD557] INFO  log.AccessLog - {\"apiName\":\"pushObjectCaches\",\"callerUid\":241288699913480432,\"code\":\"Abs.ObjectPath.Malformed\",\"eagleEyeRpcId\":\"9\",\"eagleEyeTraceId\":\"0bb3fcc915538563927598584d0593\",\"eagleEyeUserData\":\"{\\\"s\\\":\\\"b08aa170\\\"}\",\"exceptionName\":null,\"message\":null,\"ownerId\":null,\"popApiName\":\"PushObjectCache\",\"popProduct\":\"Cdn\",\"popVersion\":null,\"region\":\"center\",\"request\":[{\"accessKeyId\":\"LTAIanGcIxH02A2g\",\"apiName\":\"PushObjectCache\",\"area\":null,\"bidUser\":false,\"callerBid\":\"26842\",\"callerBidLoginEmail\":null,\"callerParentId\":1891863223772933,\"callerSecurityTransport\":true,\"callerType\":\"sub\",\"callerUid\":241288699913480432,\"callerUidLoginEmail\":null,\"clientIP\":\"115.29.231.146\",\"eagleEyeRpcId\":null,\"eagleEyeTraceId\":null,\"eagleEyeUserData\":null,\"mFAPresent\":false,\"mfaPresent\":false,\"objectPath\":\"https:/down111.bizport.cn/popupservice/res/version/HUAWEI3/0031/parse/20190329173353/20181109204832/PU01011014.zip\",\"ownerAccount\":null,\"ownerId\":null,\"ownerIdLoginEmail\":null,\"popProduct\":\"Cdn\",\"proxyCallerIp\":null,\"proxyCallerSecurityTransport\":false,\"proxyTrustTransportInfo\":false,\"regionId\":null,\"requestContent\":null,\"requestFrom\":\"OpenApi\",\"requestId\":\"59F814EF-84F2-4FF7-948D-9136C47CD557\",\"resourceGroupId\":null,\"resourceOwnerId\":null,\"securityToken\":null,\"showLog\":null,\"token\":null,\"urls\":[],\"version\":null}],\"response\":null,\"runTime\":1,\"serviceCode\":\"cdn\",\"startTime\":1553856392760,\"statusCode\":400,\"success\":false}";
//        String regEx = "(\\d+-\\d+-\\d+\\s+\\d+:\\d+:\\d+,\\d+)\\s\\[([^]]*)]\\s(\\w+)[^\"]+\"apiName\":\"([^\\n]+)\",\"callerUid\":([^\\n]+),\"code\":\"?([.|-|\\w]+)\"?,\"eagleEyeRpcId\":\"?(\\w+)\"?,\"eagleEyeTraceId\":\"?(\\w+)\"?,\"eagleEyeUserData\":\"?([^\\n]+)\"?,\"exceptionName\":\"?(\\w+)\"?,\"message\":\"?([^\\n]+)\"?,\"ownerId\":\"?(\\w+)\"?,\"popApiName\":\"?(\\w+)\"?,\"popProduct\":\"(\\w+)\",\"popVersion\":\"?([\\w-]+)\"?,\"region\":\"?([\\w-]+)\"?,\"request\":([^\\n]+),\"response\":([^\\n]+),\"runTime\":([^\\n]+),\"serviceCode\":\"([^\\n]+)\",\"startTime\":([^\\n]+),\"statusCode\":([^\\n]+),\"success\":([^\\n]+)\\}";
        String regEx = "(\\d+-\\d+-\\d+\\s+\\d+:\\d+:\\d+,\\d+)\\s\\[([^]]*)]\\s(\\w+)[^\"]+\"apiName\":\"([^\\n]+)\",\"callerUid\":([^\\n]+),\"code\":\"?([\\w|\\W]+)\"?,\"eagleEyeRpcId\":\"?(\\w+)\"?,\"eagleEyeTraceId\":\"?(\\w+)\"?,\"eagleEyeUserData\":\"?([^\\n]+)\"?,\"exceptionName\":\"?(\\w+)\"?,\"message\":\"?([^\\n]+)\"?,\"ownerId\":\"?(\\w+)\"?,\"popApiName\":\"?(\\w+)\"?,\"popProduct\":\"(\\w+)\",\"popVersion\":\"?([\\w-]+)\"?,\"region\":\"?([\\w-]+)\"?,\"request\":([^\\n]+),\"response\":([^\\n]+),\"runTime\":([^\\n]+),\"serviceCode\":\"([^\\n]+)\",\"startTime\":([^\\n]+),\"statusCode\":([^\\n]+),\"success\":([^\\n]+)\\}";
        Pattern pat = Pattern.compile(regEx);
        Matcher mat = pat.matcher(str2);
        if (mat.find()) {
            System.out.println(mat.group(1));
            System.out.println(mat.group(2));
            System.out.println(mat.group(3));
            System.out.println(mat.group(4));
            System.out.println(mat.group(5));
            System.out.println(mat.group(6));
            //鹰眼三个参数
            System.out.println(mat.group(7));
            System.out.println(mat.group(8));
            System.out.println(mat.group(9));
            System.out.println(mat.group(10));
            System.out.println(mat.group(11));
            System.out.println(mat.group(12));
            System.out.println(mat.group(13));
            System.out.println(mat.group(14));
            System.out.println(mat.group(15));
            System.out.println(mat.group(16));
            System.out.println(mat.group(17));
            System.out.println(mat.group(18));
            System.out.println(mat.group(19));
            System.out.println(mat.group(20));
            System.out.println(mat.group(21));
            System.out.println(mat.group(22));
            System.out.println(mat.group(23));
        }

    }

    public void testThirdWithRegion() {
//        String str = "2018-11-23 10:08:56,408 [C862D9B3-0078-4930-A6E6-70134EA1CC1E] INFO  ThirdBizApiLog - {\"apiName\":\"/api/room/create\",\"errorMessage\":null,\"popApiName\":\"CreateRoom\",\"region\":\"center\",\"request\":{\"host\":\"openapiproxy-cn-shanghai-inside.ialicdn.com\",\"httpMethod\":\"POST\",\"parser\":null,\"popApiName\":null,\"queryString\":\"aliUid=1394881682333599&requestId=C862D9B3-0078-4930-A6E6-70134EA1CC1E&operator=1394881682333599&requestFrom=OpenApi\",\"relativeUri\":\"/api/room/create\",\"soTimeout\":9000,\"urlParams\":{\"aliUid\":\"1394881682333599\",\"requestId\":\"C862D9B3-0078-4930-A6E6-70134EA1CC1E\",\"operator\":\"1394881682333599\",\"requestFrom\":\"OpenApi\"}},\"response\":{\"httpStatus\":200,\"returnBody\":\"{\\\"content\\\":{\\\"appId\\\":\\\"sh-4zf93fr7\\\",\\\"roomId\\\":\\\"kia3c3tn5v5wze1f\\\",\\\"anchorId\\\":\\\"46a284a248f94686a76c2d74179728d9\\\"},\\\"description\\\":\\\"service handler success\\\",\\\"retCode\\\":0}\"},\"runTime\":167,\"serviceCode\":\"live\",\"startTime\":1542938936241,\"statusCode\":\"200\",\"success\":true,\"thirdBizName\":\"openapiproxy-cn-shanghai-inside.ialicdn.com\"}";
        String str = "2018-12-29 11:47:00,104 [CD0D00E0-E7C5-49E3-B642-7DC3AB418282] INFO  log.ThirdBizApiLog - {\"apiName\":\"/v2/api/rtlog/usedByDay\",\"errorMessage\":null,\"popApiName\":\"DescribeDomainsUsageByDay\",\"region\":\"center\",\"request\":{\"baseUrl\":\"http://inner.jing.alibaba-inc.com:1160/v2/api/rtlog/usedByDay\",\"body\":null,\"headers\":{\"EagleEye-RpcId\":\"9\",\"EagleEye-TraceId\":\"0b87b7c415460552197947224d6e53\",\"X-Accept-Tz\":\"utc\",\"X-Accept-Data\":\"array\",\"time\":\"1546055219\",\"username\":\"openApi\",\"token\":\"4d19aa437a22b1b39809b3a3374cd87b\"},\"host\":\"inner.jing.alibaba-inc.com\",\"httpMethod\":\"GET\",\"parser\":null,\"popApiName\":null,\"postParams\":null,\"queryString\":\"product=cdn&requestId=CD0D00E0-E7C5-49E3-B642-7DC3AB418282&startTime=2018-12-28T16%3A00%3A00Z&endTime=2018-12-29T03%3A04%3A28Z&aliUid=1032013260743038&operator=1032013260743038&requestFrom=OpenApi\",\"relativeUri\":\"/v2/api/rtlog/usedByDay\",\"soTimeout\":9000,\"urlParams\":{\"product\":\"cdn\",\"requestId\":\"CD0D00E0-E7C5-49E3-B642-7DC3AB418282\",\"startTime\":\"2018-12-28T16:00:00Z\",\"endTime\":\"2018-12-29T03:04:28Z\",\"aliUid\":\"1032013260743038\",\"operator\":\"1032013260743038\",\"requestFrom\":\"OpenApi\"}},\"response\":\"{\\\"retCode\\\":0,\\\"description\\\":\\\"Success\\\",\\\"requestId\\\":\\\"CD0D00E0-E7C5-49E3-B642-7DC3AB418282\\\",\\\"content\\\":{\\\"dataInterval\\\":\\\"86400\\\",\\\"startTime\\\":\\\"2018-12-29\\\",\\\"endTime\\\":\\\"2018-12-29\\\",\\\"usageByDays\\\":[{\\\"byteHitRate\\\":0,\\\"requestHitRate\\\":0,\\\"maxBps\\\":0,\\\"maxBpsTime\\\":\\\"\\\",\\\"maxSrcBps\\\":0,\\\"maxSrcBpsTime\\\":\\\"\\\",\\\"totalAccess\\\":0,\\\"totalTraffic\\\":0,\\\"timeStamp\\\":\\\"2018-12-29\\\",\\\"qps\\\":0}],\\\"usageTotal\\\":{\\\"byteHitRate\\\":0,\\\"requestHitRate\\\":0,\\\"maxBps\\\":0,\\\"maxBpsTime\\\":\\\"\\\",\\\"maxSrcBps\\\":0,\\\"maxSrcBpsTime\\\":\\\"\\\",\\\"totalAccess\\\":0,\\\"totalTraffic\\\":0}},\\\"params\\\":{\\\"aliUid\\\":[\\\"1032013260743038\\\"],\\\"endTime\\\":[\\\"2018-12-29T03:04:28Z\\\"],\\\"operator\\\":[\\\"1032013260743038\\\"],\\\"product\\\":[\\\"cdn\\\"],\\\"requestFrom\\\":[\\\"OpenApi\\\"],\\\"requestId\\\":[\\\"CD0D00E0-E7C5-49E3-B642-7DC3AB418282\\\"],\\\"startTime\\\":[\\\"2018-12-28T16:00:00Z\\\"]},\\\"cache\\\":false}\",\"runTime\":286,\"serviceCode\":\"cdn\",\"startTime\":1546055219818,\"statusCode\":\"200\",\"success\":true,\"thirdBizName\":\"inner.jing.alibaba-inc.com:1160\"}";
        String str2 = "2019-03-20 11:18:43,057 [780DC90C-1598-4C8A-89D6-CA40EED68035] INFO  log.ThirdBizApiLog - {\"apiName\":\"/api/BatchCheckPermissionForSubUser\",\"errorMessage\":null,\"popApiName\":\"DescribeDomainBpsData\",\"region\":\"center\",\"request\":{\"baseUrl\":\"http://ram.cn-shanghai-internal.aliyuncs.com/api/BatchCheckPermissionForSubUser\",\"body\":\"{\\\"AuthRequestList\\\":[{\\\"acs:MFAPresent\\\":\\\"false\\\",\\\"Action\\\":\\\"Cdn:DescribeDomainBpsData\\\",\\\"acs:SecureTransport\\\":\\\"false\\\",\\\"acs:ResourceOwnerId\\\":\\\"1689905272300663\\\",\\\"Resource\\\":\\\"acs:cdn:*:1689905272300663:domain/img.psccbx.cn\\\",\\\"ID\\\":\\\"1\\\",\\\"acs:SourceIp\\\":\\\"47.101.109.122\\\",\\\"acs:ResourceGroupId\\\":\\\"rg-acfmyib3vay5jvq\\\",\\\"acs:CurrentTime\\\":\\\"2019-03-20T03:18:43Z\\\"}],\\\"SubUserInfo\\\":{\\\"SubUserId\\\":\\\"249075411246900479\\\",\\\"ParentUid\\\":\\\"1689905272300663\\\"}}\",\"headers\":{\"EagleEye-RpcId\":\"9\",\"RequestId\":\"780DC90C-1598-4C8A-89D6-CA40EED68035\",\"EagleEye-TraceId\":\"0be684b615530519230285379d42eb\",\"RAM-Timestamp\":\"1553051923\",\"RAM-SignatureMethod\":\"HmacSHA1\",\"RAM-SignatureVersion\":\"1.0\",\"RAM-AccessKeyId\":\"CDN_PRODUCT\",\"RAM-Signature\":\"h8HIrjg78BJCKuP8clMJBNlQ8Dw=\"},\"host\":\"ram.cn-shanghai-internal.aliyuncs.com\",\"httpMethod\":\"POST\",\"parser\":null,\"popApiName\":null,\"postParams\":null,\"queryString\":null,\"relativeUri\":\"/api/BatchCheckPermissionForSubUser\",\"soTimeout\":9000,\"urlParams\":null},\"response\":\"{\\n    \\\"AuthResponseList\\\": [{\\n            \\\"CheckPermissionMessage\\\": \\\"PASS\\\",\\n            \\\"CheckPermissionResult\\\": \\\"2001\\\",\\n            \\\"ID\\\": \\\"1\\\"}],\\n    \\\"RequestId\\\": \\\"780DC90C-1598-4C8A-89D6-CA40EED68035\\\"}\",\"runTime\":2,\"serviceCode\":\"cdn\",\"startTime\":1553051923054,\"statusCode\":\"200\",\"success\":true,\"thirdBizName\":\"ram.cn-shanghai-internal.aliyuncs.com\"}";
        //      String regEx = "(\\d+-\\d+-\\d+\\s+\\d+:\\d+:\\d+,\\d+)\\s\\[(.*)\\]\\s(\\w+)[^\"]+\"apiName\":\"([^\\n]+)\",\"errorMessage\":([^\\n]+),\"popApiName\":\"?(\\w+)\"?,\"region\":\"?(\\w+)\"?,\"request\":([^\\n]+),\"response\":([^\\n]+),\"runTime\":([^\\n]+),\"serviceCode\":\"?(\\w+)\"?,\"startTime\":([^\\n]+),\"statusCode\":\"?(\\w+)\"?,\"success\":([^\\n]+),\"thirdBizName\":\"([^\\n]+)\"\\}";
        String regEx = "(\\d+-\\d+-\\d+\\s+\\d+:\\d+:\\d+,\\d+)\\s\\[(.*)\\]\\s(\\w+)[^\"]+\"apiName\":\"([^\\n]+)\",\"errorMessage\":([^\\n]+),\"popApiName\":\"?(\\w+)\"?,\"region\":\"?(\\w+)\"?,\"request\":([^\\n]+),\"response\":([^\\n]+),\"runTime\":([^\\n]+),\"serviceCode\":\"?(\\w+)\"?,\"startTime\":([^\\n]+),\"statusCode\":\"?(\\w+)\"?,\"success\":([^\\n]+),\"thirdBizName\":\"([^\\n]+)\"\\}";
        Pattern pat = Pattern.compile(regEx);
        Matcher mat = pat.matcher(str2);
        if (mat.find()) {
            System.out.println(mat.group(1));
            System.out.println(mat.group(2));
            System.out.println(mat.group(3));
            System.out.println(mat.group(4));
            System.out.println(mat.group(5));
            System.out.println(mat.group(6));
            System.out.println(mat.group(7));

        }
    }


    public void testEagleeye() {
        String str = "0ab264dd15446023682736204d15ba|1544602368280|2|9|com.aliyun.live.biz.service.common.LiveApiCommonService:1.0.0.live|invokeLiveApi~LM|00|10.178.100.221|168|0|@s3a93ea40@ps";
        String regEx = "(\\w+)\\|(\\w+)\\|(\\w+)\\|(\\+)";
        Pattern pat = Pattern.compile(regEx);
        Matcher mat = pat.matcher(str);
        if (mat.find()) {
            System.out.println(mat.group(1));
            System.out.println(mat.group(2));
            System.out.println(mat.group(3));
            System.out.println(mat.group(4));

        }
    }


}
